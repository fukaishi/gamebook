# 夜道 - インタラクティブストーリー

昔のゲームブックのようなストーリー分岐が楽しめるweb小説アプリです。

## ストーリー

塾からの帰り道、暗い夜道を一人で歩く女子高生。
選択によって物語は分岐し、3つの異なるエンディングを迎えます。

- **平和な帰り道**: 明るい道を選び、無事に帰宅
- **黒猫との遭遇**: 暗い道で黒猫に遭遇
- **暗闇の何か**: 何かの気配を感じながら逃げ帰る

## 機能

- **一文字ずつ表示**: テキストがタイプライター風に表示される
- **スペースキーでページ送り**: キーボード操作で快適に読み進められる
- **分岐選択**: クリックまたは数字キー（1, 2）で選択肢を選べる
- **文字演出エフェクト**:
  - 大きな文字で驚きを演出
  - 小さな文字で囁きや物音を表現
  - 震える文字で恐怖感を演出
  - 強調文字で重要な部分を際立たせる

## 使い方

1. `index.html` をブラウザで開く
2. テキストが一文字ずつ表示されます
3. `スペースキー`を押してページを送る
4. 選択肢が出たら、クリックまたは数字キー（1, 2）で選択
5. エンディングまで楽しむ

## 技術仕様

- **HTML5**: セマンティックなマークアップ
- **CSS3**: アニメーション、グラデーション、レスポンシブデザイン
- **Vanilla JavaScript**: フレームワーク不要のシンプルな実装

## ファイル構成

```
gamebook/
├── index.html      # メインHTML
├── style.css       # スタイルシート
├── script.js       # ゲームロジック
├── story.json      # ストーリーデータ
├── admin.html      # 管理画面HTML
├── admin.css       # 管理画面スタイル
├── admin.js        # 管理画面ロジック
└── README.md       # このファイル
```

## 管理画面

ストーリーを視覚的に編集できる管理画面が用意されています。

### アクセス方法

`admin.html` をブラウザで開く（パス: `/admin`）

### 機能

- **シーン一覧表示**: 全シーンを一覧表示
- **シーン編集**: テキスト、遷移、エフェクトをGUIで編集
- **次のシーン指定**: ドロップダウンから簡単に指定
- **選択肢管理**: 選択肢の追加・削除・編集
- **エフェクト管理**: 文字エフェクトの位置とタイプをGUIで指定
- **JSONインポート/エクスポート**: ファイルの読み込みと保存

### 使い方

1. `admin.html` を開く
2. 「JSONを読み込む」で既存の `story.json` を読み込む（自動読み込みもあり）
3. 左側のシーン一覧からシーンを選択
4. 右側のエディタで編集
5. 「シーンを保存」で変更を保存
6. 「JSONを保存」で編集したJSONをダウンロード
7. ダウンロードしたファイルを `story.json` に上書き

## カスタマイズ

### ストーリーの追加・変更（手動編集）

管理画面を使わずに直接 `story.json` ファイルを編集することもできます。
ストーリーデータは外部JSONファイルで管理されているため、プログラムコードを触らずに内容を変更できます。

#### JSONフォーマット

```json
{
  "scene_id": {
    "text": "表示するテキスト",
    "next": "次のシーンID",
    "choices": [
      { "text": "選択肢1", "next": "next_scene_1" },
      { "text": "選択肢2", "next": "next_scene_2" }
    ],
    "effects": [
      { "start": 0, "end": 10, "type": "large" }
    ]
  }
}
```

#### プロパティ説明

- **text**: 表示するテキスト（`\n`で改行）
- **next**: 次のシーンID（選択肢がない場合）
- **choices**: 選択肢の配列（nextと排他的）
- **effects**: 文字エフェクトの配列（オプション）
  - **start**: エフェクト開始位置（文字数）
  - **end**: エフェクト終了位置（文字数）
  - **type**: エフェクトタイプ（`large`, `small`, `shake`, `emphasis`）

### テキスト表示速度の変更

`script.js` の `typeSpeed` を変更します（ミリ秒単位）。

```javascript
this.typeSpeed = 50; // デフォルト: 50ms
```

## ブラウザ対応

- Chrome（推奨）
- Firefox
- Safari
- Edge

## ライセンス

MIT License
